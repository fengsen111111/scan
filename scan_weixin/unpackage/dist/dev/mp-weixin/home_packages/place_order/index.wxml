<view class="container"><view style="height:1.33vw;"></view><block wx:if="{{!addType}}"><view class="info"><view class="label">基本信息</view><view class="option flex alignCenter spaceBetween"><view data-event-opts="{{[['tap',[['selectTable']]]]}}" class="left flex alignCenter" bindtap="__e">餐位<text>{{table_code||"请选择"}}</text></view><view class="right flex alignCenter"><text style="margin-right:4vw;">人数</text><block wx:if="{{!numberShow}}"><text>{{orderForm.person_number}}</text></block><block wx:else><view class="number flex alignCenter"><view data-event-opts="{{[['tap',[['changePeopleNum',['min']]]]]}}" class="add flex alignCenter justifyCenter" bindtap="__e"><u-icon vue-id="24d7cb26-1" name="minus" color="rgb(245,232,174)" bind:__l="__l"></u-icon></view><view class="num flex alignCenter justifyCenter">{{''+orderForm.person_number+''}}</view><view data-event-opts="{{[['tap',[['changePeopleNum',['add']]]]]}}" class="min flex alignCenter justifyCenter" bindtap="__e"><u-icon vue-id="24d7cb26-2" name="plus" color="rgb(245,232,174)" bind:__l="__l"></u-icon></view></view></block></view></view><view class="label">备注</view><view class="textarea"><textarea style="min-height:18.67vw;max-height:18.67vw;" auto-height="{{true}}" maxlength="-1" placeholder="输入备注（选填）" placeholder-class="input_placeholder" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['orderForm']]]]]}}" value="{{orderForm.remark}}" bindinput="__e"></textarea></view></view></block><view class="shopInfo"><view class="label">商品信息</view><block wx:for="{{goodsList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item"><view class="title flex alignCenter spaceBetween"><view>{{''+item.info.name+''}}<block wx:if="{{item.choice_des}}"><text style="font-size:3vw;color:#999999;font-weight:normal;">{{"（"+item.choice_des+"）"}}</text></block></view><u-icon vue-id="{{'24d7cb26-3-'+index}}" name="trash" color="#000000" size="20" data-event-opts="{{[['^click',[['trash',[index]]]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view><view class="content flex spaceBetween"><block wx:if="{{item.info.cover_image}}"><image src="{{item.info.cover_image}}" mode></image></block><block wx:else><image src="../../static/cpmrt.png" mode></image></block><view class="con">{{item.info.introduce}}</view></view><view class="price flex alignCenter spaceBetween">{{'单价 ￥'+item.info.price+''}}<view class="number flex alignCenter"><view data-event-opts="{{[['tap',[['changeCarNum',['$0','min',index],[[['goodsList','',index]]]]]]]}}" class="add flex alignCenter justifyCenter" bindtap="__e"><u-icon vue-id="{{'24d7cb26-4-'+index}}" name="minus" color="rgb(245,232,174)" bind:__l="__l"></u-icon></view><view class="num flex alignCenter justifyCenter">{{''+item.num+''}}</view><view data-event-opts="{{[['tap',[['changeCarNum',['$0','add',index],[[['goodsList','',index]]]]]]]}}" class="min flex alignCenter justifyCenter" bindtap="__e"><u-icon vue-id="{{'24d7cb26-5-'+index}}" name="plus" color="rgb(245,232,174)" bind:__l="__l"></u-icon></view></view></view></view></block></view><view class="bottom flex alignCenter spaceBetween"><view class="left"><view class="top flex alignCenter spaceBetween"><view class="left flex alignCenter">{{'总计￥'+(moneyObj.price||0)+''}}</view></view><block wx:if="{{!workerType}}"><view class="bottom flex alignCenter spaceBetween">{{'获得积分:'+(moneyObj.reward_integral||0)+''}}</view></block></view><view class="right flex alignCenter"><view data-event-opts="{{[['tap',[['order']]]]}}" class="gotIt" catchtap="__e">{{addType?'加菜':'菜品下单'}}</view></view></view><u-popup vue-id="24d7cb26-6" show="{{discountShow}}" mode="{{discountFirst?'center':'bottom'}}" round="5.33vw" data-event-opts="{{[['^close',[['discountClose']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{discountFirst}}"><view class="discount_checkbox"><u-checkbox-group bind:input="__e" vue-id="{{('24d7cb26-7')+','+('24d7cb26-6')}}" shape="circle" value="{{checkValue1}}" data-event-opts="{{[['^input',[['__set_model',['','checkValue1','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><u-checkbox vue-id="{{('24d7cb26-8')+','+('24d7cb26-7')}}" activeColor="#EFA246" labelSize="2.67vw" labelColor="#999999" label="{{'当前积分可抵扣:￥'+(moneyObj.integral_price||0)+'，是否抵扣'}}" name="{{1}}" bind:__l="__l"></u-checkbox></u-checkbox-group></view></block><view class="discountContent" style="{{(discountFirst?'width: 85vw;':'')}}"><view class="title flex alignCenter spaceBetween">优惠卷<u-icon vue-id="{{('24d7cb26-9')+','+('24d7cb26-6')}}" name="close" color="#000000" size="25" data-event-opts="{{[['^click',[['discountClose']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view><scroll-view style="{{($root.g0?'height:20vh':'height: 50vh;')}}" scroll-y="true"><block wx:if="{{$root.g1}}"><u-empty vue-id="{{('24d7cb26-10')+','+('24d7cb26-6')}}" mode="coupon" text="暂无可用的优惠券" bind:__l="__l"></u-empty></block><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view class="item_box"><view class="item flex alignCenter"><image src="{{item.$orig.cover_image}}" alt mode="aspectFill"></image><view class="title flex spaceBetween flexColumn">{{''+item.$orig.name+''}}<text>{{item.$orig.des}}</text></view><view class="content flex spaceBetween flexColumn">{{''+(item.$orig.discount_type==='a'?'满'+item.g2+'减'+item.g3:item.$orig.data+'折')+''}}<text>{{"有效期至："+item.$orig.end_time}}</text></view></view><block wx:if="{{item.$orig.types}}"><view class="type">{{'可用类型：'+item.$orig.types+''}}</view></block><view class="get flex flexEnd flexColumn" style="{{(!item.$orig.types?'margin-top:2vw':'')}}"><block wx:if="{{item.$orig.has_status==='N'}}"><view data-event-opts="{{[['tap',[['getCoupon',['$0'],[[['discountList','id',item.$orig.id]]]]]]]}}" class="charge flex alignCenter justifyCenter" bindtap="__e">领取</view></block><block wx:if="{{item.$orig.has_status==='Y'}}"><view data-event-opts="{{[['tap',[['useCouponEven',['$0'],[[['discountList','id',item.$orig.id]]]]]]]}}" class="charge flex alignCenter justifyCenter" bindtap="__e">使用</view></block></view></view></block></scroll-view></view></u-popup><u-popup vue-id="24d7cb26-11" show="{{payShow}}" mode="bottom" round="5.33vw" data-event-opts="{{[['^close',[['e0']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="payContent"><view class="title flex alignCenter spaceBetween">支付方式<u-icon vue-id="{{('24d7cb26-12')+','+('24d7cb26-11')}}" name="close" size="25" color="#000000" data-event-opts="{{[['^click',[['e1']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view><view data-event-opts="{{[['tap',[['changePayType',[2]]]]]}}" class="chooseItem flex alignCenter spaceBetween" bindtap="__e"><view class="item flex alignCenter"><u-icon vue-id="{{('24d7cb26-13')+','+('24d7cb26-11')}}" name="weixin-fill" color="#68BF7B" size="5.33vw" bind:__l="__l"></u-icon><text>微信</text></view><block wx:if="{{payType===2}}"><u-icon vue-id="{{('24d7cb26-14')+','+('24d7cb26-11')}}" name="checkmark-circle-fill" color="black" size="20" bind:__l="__l"></u-icon></block></view><view data-event-opts="{{[['tap',[['changePayType',[1]]]]]}}" class="chooseItem flex alignCenter spaceBetween" bindtap="__e"><view class="item flex alignCenter"><image src="/static/money.png" mode></image><text>余额</text>{{''+userMoney+''}}</view><block wx:if="{{payType===1}}"><u-icon vue-id="{{('24d7cb26-15')+','+('24d7cb26-11')}}" name="checkmark-circle-fill" color="black" size="20" bind:__l="__l"></u-icon></block></view><view data-event-opts="{{[['tap',[['confirm']]]]}}" class="confirm" bindtap="__e">{{addType?'加菜':'菜品下单'}}</view></view></u-popup><city-picker vue-id="24d7cb26-16" mask-close-able="{{true}}" visible="{{tableShow}}" dataList="{{tableList}}" data-event-opts="{{[['^confirm',[['tableConfirm']]],['^cancel',[['e2']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l"></city-picker></view>