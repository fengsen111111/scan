(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/index"],{"1f86":function(e,t,n){},"3b43":function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("7eb4")),s=a(n("ee10")),o={components:{FoodItem:function(){n.e("components/FoodItem").then(function(){return resolve(n("5f58"))}.bind(null,n)).catch(n.oe)}},data:function(){return{statusBarHeight:0,navHeight:0,navigationBarHeight:0,keyWords:"",formData:{distance:"",type_id:"",location:"",currentPage:1,perPage:10},freshFlag:!1,screenFlag:!1,screenKey:"",screen:[],bannerList:[],total:0,list:[]}},onLoad:function(){var e=this,t=getApp().globalData;this.statusBarHeight=t.statusBarHeight,this.navigationBarHeight=t.navigationBarHeight,this.navHeight=t.navHeight,this.$request("/food/Banner/getBannerList").then((function(t){e.bannerList=t.list})),this.netWork()},methods:{scanCode:function(){var t=this;return(0,s.default)(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.scanCode({scanType:["qrCode"],success:function(n){console.log("res",n);for(var a=n.result.split("?")[1],i={},s=a.split("&"),o=0;o<s.length;o++)i[s[o].split("=")[0]]=s[o].split("=")[1];t.$request("/food/Order/userGetOrderDetailByTableID",{table_id:i.seat_id}).then((function(n){n.order_id?t.$nav("/order_packages/detail/index",{id:n.order_id,time_status:"",pay_status:""}):(i.store_id&&(e.setStorageSync("scanInfo",{seat_code:i.seat_code,seat_id:i.seat_id,store_id:i.store_id,type:"scan"}),t.$nav("/home_packages/shop_detail/index")),console.log(i))}))}});case 1:case"end":return n.stop()}}),n)})))()},search:function(){this.$nav("/home_packages/search/index",{keyWords:this.keyWords})},netWork:function(){var t=this;e.showLoading({title:"请稍后",mask:!0}),e.getLocation({type:"wgs84",success:function(n){t.formData.location=n.longitude+","+n.latitude,t.$request("/food/Store/getStoreList",t.formData).then((function(n){e.hideLoading(),t.total=n.count,1===t.formData.currentPage?t.list=n.list:t.list=t.list.concat(n.list),t.freshFlag=!1})).catch((function(){e.hideLoading(),t.freshFlag=!1}))},fail:function(){e.hideLoading(),e.authorize({scope:"scope.userLocation",fail:function(){e.showModal({title:"温馨提示",content:"此功能需要获取您的地理位置，请确认授权已获得更好的服务",success:function(t){t.confirm&&e.openSetting()}})}})}})},refresh:function(){var e=this;return(0,s.default)(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.formData={distance:"",type_id:"",location:"",currentPage:1,perPage:10},e.freshFlag=!0,e.netWork();case 3:case"end":return t.stop()}}),t)})))()},reachBottom:function(){this.formData.currentPage<Math.ceil(this.total/this.formData.perPage)&&(this.formData.currentPage++,this.netWork())},jump:function(e){"a"===e.jump_type?this.$nav("/pages/RichText/index",{title:"详情",url:"/food/Banner/getBannerContent",id:e.id}):"b"===e.jump_type?this.$nav("/home_packages/shop_detail/index",{id:e.jump_data}):"c"===e.jump_type?this.$nav("/mine_packages/points/index"):"d"===e.jump_type?this.$nav("/mine_packages/distributive/index"):"e"===e.jump_type&&this.$nav("/mine_packages/wallet/index")},openScreen:function(e){var t=this;this.screen=[],this.screenFlag=!0,this.screenKey=e,"distance"===e?this.$request("/food/Setting/getSetting").then((function(e){t.screen=e.distances.map((function(e){return{id:e,name:e+"米"}})),t.screen.unshift({id:"",name:"附近"})})):this.$request("/food/Type/getTypeList").then((function(e){t.screen=e.list,t.screen.unshift({id:"",name:"全部"})}))},confirmScreen:function(e){this.formData[this.screenKey]="string"===typeof e?"-1"===e?"":e:e.id,this.screenFlag=!1,this.formData.currentPage=1,this.netWork()}}};t.default=o}).call(this,n("df3c")["default"])},"6d1c":function(e,t,n){"use strict";n.r(t);var a=n("ab3a"),i=n("8184");for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("81cd");var o=n("828b"),r=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=r.exports},8184:function(e,t,n){"use strict";n.r(t);var a=n("3b43"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=i.a},"81cd":function(e,t,n){"use strict";var a=n("1f86"),i=n.n(a);i.a},ab3a:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var a={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"2b07"))}},i=function(){var e=this,t=e.$createElement,a=(e._self._c,"distance"===e.screenKey&&e.screenFlag?n("109a"):null),i="distance"===e.screenKey&&e.screenFlag?null:n("9e5d"),s="type_id"===e.screenKey&&e.screenFlag?n("2b82"):null,o="type_id"===e.screenKey&&e.screenFlag?null:n("eef3");e._isMounted||(e.e0=function(t){e.screenFlag=!1}),e.$mp.data=Object.assign({},{$root:{m0:a,m1:i,m2:s,m3:o}})},s=[]},d942:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("5e4b");a(n("3240"));var i=a(n("6d1c"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["d942","common/runtime","common/vendor"]]]);