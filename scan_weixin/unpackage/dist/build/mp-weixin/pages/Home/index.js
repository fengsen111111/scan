(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/index"],{5328:function(e,t,n){"use strict";var i=n("8d2e"),a=n.n(i);a.a},"5ab2":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"5c12"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"4589"))}},a=function(){var e=this,t=e.$createElement,i=(e._self._c,"distance"===e.screenKey&&e.screenFlag?n("26ec"):null),a="distance"===e.screenKey&&e.screenFlag?null:n("dc05"),o="type_id"===e.screenKey&&e.screenFlag?n("a99e"):null,s="type_id"===e.screenKey&&e.screenFlag?null:n("c186");e._isMounted||(e.e0=function(t){e.screenFlag=!1},e.e1=function(t){e.isFirstOpen=!1},e.e2=function(){e.isFirstOpen=!1,e.$nav("/mine_packages/yszc/index")}),e.$mp.data=Object.assign({},{$root:{m0:i,m1:a,m2:o,m3:s}})},o=[]},"6e5c":function(e,t,n){"use strict";(function(e,i){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("7eb4")),s=a(n("ee10")),c={components:{FoodItem:function(){n.e("components/FoodItem").then(function(){return resolve(n("1c94"))}.bind(null,n)).catch(n.oe)}},data:function(){return{statusBarHeight:0,navHeight:0,navigationBarHeight:0,keyWords:"",formData:{distance:"",type_id:"",location:"",currentPage:1,perPage:10},freshFlag:!1,screenFlag:!1,screenKey:"",screen:[],bannerList:[],total:0,list:[],isFirstOpen:!1}},onLoad:function(){var t=this,n=getApp().globalData;this.statusBarHeight=n.statusBarHeight,this.navigationBarHeight=n.navigationBarHeight,this.navHeight=n.navHeight,this.$request("/food/Banner/getBannerList").then((function(e){t.bannerList=e.list})),this.netWork();var i=this,a=e.getStorageSync("isFirstOpen");a||setTimeout((function(){console.log("准备弹窗"),i.isFirstOpen=!0}),1e3)},onShow:function(){this.formData.location.length>0||(this.formData.location=e.getStorageSync("mr_location")?e.getStorageSync("mr_location"):"",this.modw())},methods:{setPup:function(){e.setStorageSync("isFirstOpen",!0),this.isFirstOpen=!1},scanCode:function(){var e=this;return(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.scanCode({success:function(t){console.log("res",t),e.$nav("/"+t.path)}});case 1:case"end":return t.stop()}}),t)})))()},search:function(){this.$nav("/home_packages/search/index",{keyWords:this.keyWords})},netWork:function(){var t=this;e.showLoading({title:"获取定位中...",mask:!0}),e.getLocation({type:"wgs84",success:function(n){t.formData.location=n.longitude+","+n.latitude,t.$request("/food/Store/getStoreList",t.formData).then((function(n){e.hideLoading(),t.total=n.count,1===t.formData.currentPage?t.list=n.list:t.list=t.list.concat(n.list),t.freshFlag=!1})).catch((function(){e.hideLoading(),t.freshFlag=!1}))},fail:function(){e.hideLoading(),e.authorize({scope:"scope.userLocation",fail:function(){e.showModal({title:"温馨提示",content:"此功能需要获取您的地理位置，请确认授权已获得更好的服务",success:function(t){t.confirm&&e.openSetting()}})}})}})},modw:function(){var t=this;this.$request("/food/Store/getStoreList",this.formData).then((function(n){e.hideLoading(),t.total=n.count,1===t.formData.currentPage?t.list=n.list:t.list=t.list.concat(n.list),t.freshFlag=!1})).catch((function(){e.hideLoading(),t.freshFlag=!1}))},refresh:function(){var e=this;return(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.formData={distance:"",type_id:"",location:"",currentPage:1,perPage:10},e.freshFlag=!0,e.netWork();case 3:case"end":return t.stop()}}),t)})))()},reachBottom:function(){this.formData.currentPage<Math.ceil(this.total/this.formData.perPage)&&(this.formData.currentPage++,this.netWork())},jump:function(e){console.log("obj",e),"a"===e.jump_type?this.$nav("/pages/RichText/index",{title:"详情",url:"/food/Banner/getBannerContent",id:e.id}):"b"===e.jump_type?this.$nav("/home_packages/shop_detail/index",{id:e.jump_data}):"c"===e.jump_type?this.$nav("/mine_packages/points/index"):"d"===e.jump_type?this.$nav("/mine_packages/distributive/index"):"e"===e.jump_type&&this.$nav("/mine_packages/wallet/index")},openScreen:function(e){var t=this;this.screen=[],this.screenFlag=!0,this.screenKey=e,"distance"===e?this.$request("/food/Setting/getSetting").then((function(e){t.screen=e.distances.map((function(e){return{id:e,name:e+"米"}})),t.screen.unshift({id:"",name:"附近"})})):this.$request("/food/Type/getTypeList").then((function(e){t.screen=e.list,t.screen.unshift({id:"",name:"全部"})}))},confirmScreen:function(e){this.formData[this.screenKey]="string"===typeof e?"-1"===e?"":e:e.id,this.screenFlag=!1,this.formData.currentPage=1,this.netWork()}}};t.default=c}).call(this,n("df3c")["default"],n("3223")["default"])},"7ca7":function(e,t,n){"use strict";n.r(t);var i=n("6e5c"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"83e5":function(e,t,n){"use strict";n.r(t);var i=n("5ab2"),a=n("7ca7");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("5328");var s=n("828b"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=c.exports},"8d2e":function(e,t,n){},cd12:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("224c");i(n("3240"));var a=i(n("83e5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["cd12","common/runtime","common/vendor"]]]);