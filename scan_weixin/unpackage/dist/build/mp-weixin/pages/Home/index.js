(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/index"],{5398:function(e,t,n){},"9b83":function(e,t,n){"use strict";n.r(t);var i=n("c589"),a=n("dd56");for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("a60b");var o=n("828b"),r=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=r.exports},a60b:function(e,t,n){"use strict";var i=n("5398"),a=n.n(i);a.a},c589:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var i={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"e907"))}},a=function(){var e=this,t=e.$createElement,i=(e._self._c,"distance"===e.screenKey&&e.screenFlag?n("d8d9"):null),a="distance"===e.screenKey&&e.screenFlag?null:n("339e"),s="type_id"===e.screenKey&&e.screenFlag?n("3e494"):null,o="type_id"===e.screenKey&&e.screenFlag?null:n("e449");e._isMounted||(e.e0=function(t){e.screenFlag=!1}),e.$mp.data=Object.assign({},{$root:{m0:i,m1:a,m2:s,m3:o}})},s=[]},c715:function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("7eb4")),s=i(n("ee10")),o={components:{FoodItem:function(){n.e("components/FoodItem").then(function(){return resolve(n("d524"))}.bind(null,n)).catch(n.oe)}},data:function(){return{statusBarHeight:0,navHeight:0,navigationBarHeight:0,keyWords:"",formData:{distance:"",type_id:"",location:"",currentPage:1,perPage:10},freshFlag:!1,screenFlag:!1,screenKey:"",screen:[],bannerList:[],total:0,list:[]}},onLoad:function(){var e=this,t=getApp().globalData;this.statusBarHeight=t.statusBarHeight,this.navigationBarHeight=t.navigationBarHeight,this.navHeight=t.navHeight,this.$request("/food/Banner/getBannerList").then((function(t){e.bannerList=t.list})),this.netWork()},methods:{scanCode:function(){var t=this;e.scanCode({scanType:["qrCode"],success:function(n){for(var i=n.result.split("?")[1],a={},s=i.split("&"),o=0;o<s.length;o++)a[s[o].split("=")[0]]=s[o].split("=")[1];a.store_id&&(e.setStorageSync("scanInfo",{seat_code:a.seat_code,seat_id:a.seat_id,store_id:a.store_id,type:"scan"}),t.$nav("/home_packages/shop_detail/index")),console.log(a)}})},search:function(){this.$nav("/home_packages/search/index",{keyWords:this.keyWords})},netWork:function(){var t=this;e.showLoading({title:"请稍后",mask:!0}),e.getLocation({type:"wgs84",success:function(n){t.formData.location=n.longitude+","+n.latitude,t.$request("/food/Store/getStoreList",t.formData).then((function(n){e.hideLoading(),t.total=n.count,1===t.formData.currentPage?t.list=n.list:t.list=t.list.concat(n.list),t.freshFlag=!1})).catch((function(){e.hideLoading(),t.freshFlag=!1}))},fail:function(){e.hideLoading(),e.authorize({scope:"scope.userLocation",fail:function(){e.showModal({title:"温馨提示",content:"此功能需要获取您的地理位置，请确认授权已获得更好的服务",success:function(t){t.confirm&&e.openSetting()}})}})}})},refresh:function(){var e=this;return(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.formData={distance:"",type_id:"",location:"",currentPage:1,perPage:10},e.freshFlag=!0,e.netWork();case 3:case"end":return t.stop()}}),t)})))()},reachBottom:function(){this.formData.currentPage<Math.ceil(this.total/this.formData.perPage)&&(this.formData.currentPage++,this.netWork())},jump:function(e){"a"===e.jump_type?this.$nav("/pages/RichText/index",{title:"详情",url:"/food/Banner/getBannerContent",id:e.id}):"b"===e.jump_type?this.$nav("/home_packages/shop_detail/index",{id:e.jump_data}):"c"===e.jump_type?this.$nav("/mine_packages/points/index"):"d"===e.jump_type?this.$nav("/mine_packages/distributive/index"):"e"===e.jump_type&&this.$nav("/mine_packages/wallet/index")},openScreen:function(e){var t=this;this.screen=[],this.screenFlag=!0,this.screenKey=e,"distance"===e?this.$request("/food/Setting/getSetting").then((function(e){t.screen=e.distances.map((function(e){return{id:e,name:e+"米"}})),t.screen.unshift({id:"",name:"附近"})})):this.$request("/food/Type/getTypeList").then((function(e){t.screen=e.list,t.screen.unshift({id:"",name:"全部"})}))},confirmScreen:function(e){this.formData[this.screenKey]="string"===typeof e?"-1"===e?"":e:e.id,this.screenFlag=!1,this.formData.currentPage=1,this.netWork()}}};t.default=o}).call(this,n("df3c")["default"])},d33b:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("6d76");i(n("3240"));var a=i(n("9b83"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},dd56:function(e,t,n){"use strict";n.r(t);var i=n("c715"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=a.a}},[["d33b","common/runtime","common/vendor"]]]);