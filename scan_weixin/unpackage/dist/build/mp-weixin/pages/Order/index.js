(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Order/index"],{"43b9":function(t,e,n){},"77a4":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"086b"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"2d96"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"8297"))}},r=function(){var t=this,e=t.$createElement,o=(t._self._c,t.orderList.length),r=0===o?n("4291"):null;t._isMounted||(t.e0=function(e){t.payShow=!1},t.e1=function(e){t.payShow=!1}),t.$mp.data=Object.assign({},{$root:{g0:o,m0:r}})},a=[]},"8bd7":function(t,e,n){"use strict";n.r(e);var o=n("77a4"),r=n("906d");for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("c09e");var i=n("828b"),u=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=u.exports},"906d":function(t,e,n){"use strict";n.r(e);var o=n("ae82"),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=r.a},a82f:function(t,e,n){"use strict";(function(t,e){var o=n("47a9");n("bcba");o(n("3240"));var r=o(n("8bd7"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},ae82:function(t,e,n){"use strict";(function(t){var o=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("7ca3"));function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={data:function(){return{current:1,small_current:1,formData:{currentPage:1,perPage:10},total:0,orderList:[],payShow:!1,payType:1,userMoney:0,payFlag:!0,orderId:""}},onShow:function(){var t=this;this.netWork(),this.$request("/food/User/getUserInfo").then((function(e){t.userMoney=e.money}))},methods:{netWork:function(){var e=this;t.showLoading({title:"请稍后",mask:!0}),this.$request("/food/Order/userGetOrderList",this.formData).then((function(n){t.hideLoading(),e.total=n.count,1===e.formData.currentPage?e.orderList=n.list:e.orderList=e.orderList.concat(n.list)})).catch((function(){t.hideLoading()}))},changeScreen:function(t){this.orderList=[],"a"===t&&"a"!==this.formData.pay_status&&(this.formData.pay_status="a"),this.formData.time_status=t,this.netWork()},changeSmall:function(t){this.orderList=[],this.formData.pay_status=t,this.netWork()},changePayType:function(t){this.payType=t},addMenu:function(t){this.$nav("/home_packages/shop_detail/index",{id:t.store_id,type:"add",orderId:t.id,useCoupon:!!t.coupon_id})},goPay:function(t){this.orderId=t,this.payShow=!0},confirm:function(){var e=this;if(this.payFlag){this.payFlag=!1;var n="";1===this.payType?n="c":2===this.payType&&(n="a"),this.$request("/food/Order/payOrder",{order_id:this.orderId,coupon_id:"",pay_type:n}).then((function(n){1===n.result?(t.showToast({title:"支付成功",icon:"success",duration:2e3}),e.payShow=!1,e.formData.currentPage=1,e.netWork(),e.payFlag=!0):3===n.result?t.requestPayment(i(i({provider:"wxpay"},n.pay_data),{},{success:function(t){e.payShow=!1,e.formData.currentPage=1,e.netWork()},fail:function(){t.showToast({title:"用户取消支付",icon:"error"}),e.payFlag=!0}})):e.payFlag=!0})).catch((function(){e.payFlag=!0}))}}},onReachBottom:function(){console.log("执行，滚动到底部了"),this.formData.currentPage<Math.ceil(this.total/this.formData.perPage)&&(this.formData.currentPage++,this.netWork())}};e.default=u}).call(this,n("df3c")["default"])},c09e:function(t,e,n){"use strict";var o=n("43b9"),r=n.n(o);r.a}},[["a82f","common/runtime","common/vendor"]]]);