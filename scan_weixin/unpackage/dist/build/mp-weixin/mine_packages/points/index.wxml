<view class="container"><view class="head"><view class="title flex alignCenter spaceBetween"><view class="left">我的积分<text>{{point}}</text></view><text data-event-opts="{{[['tap',[['$nav',['/mine_packages/point_detail/index']]]]]}}" bindtap="__e">积分记录</text></view><view class="big_screen" style="{{'padding:'+(current===1?'4vw':'4vw 0 2.67vw')+';'}}"><view data-event-opts="{{[['tap',[['changeCurrent',[1]]]]]}}" class="{{['item',current===1?'active':'']}}" bindtap="__e">优惠券</view><view data-event-opts="{{[['tap',[['changeCurrent',[2]]]]]}}" class="{{['item',current===2?'active':'']}}" bindtap="__e">商品</view></view><block wx:if="{{current===1}}"><scroll-view style="width:calc(100% - 8vw);background:#f5f5f5;padding:0 4vw;" scroll-x="true" data-event-opts="{{[['scrolltolower',[['reachBottom']]]]}}" bindscrolltolower="__e"><view class="screen"><view data-event-opts="{{[['tap',[['changeActive',['a']]]]]}}" class="{{['item',formData.use_type==='a'?'active':'']}}" bindtap="__e">平台通用</view><view data-event-opts="{{[['tap',[['changeActive',['b']]]]]}}" class="{{['item',formData.use_type==='b'?'active':'']}}" bindtap="__e">全场通用</view><view data-event-opts="{{[['tap',[['changeActive',['c']]]]]}}" class="{{['item',formData.use_type==='c'?'active':'']}}" bindtap="__e">门店通用</view><view data-event-opts="{{[['tap',[['changeActive',['d']]]]]}}" class="{{['item',formData.use_type==='d'?'active':'']}}" bindtap="__e">分类通用</view><view data-event-opts="{{[['tap',[['changeActive',['e']]]]]}}" class="{{['item',formData.use_type==='e'?'active':'']}}" bindtap="__e">菜品限定</view><view data-event-opts="{{[['tap',[['changeActive',['f']]]]]}}" class="{{['item',formData.use_type==='f'?'active':'']}}" bindtap="__e">套餐限定</view></view></scroll-view></block></view><block wx:if="{{current===1}}"><view class="list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="$orig"><view class="item_box"><view class="item flex alignCenter"><image src="{{item.$orig.cover_image}}" alt mode="aspectFill"></image><view class="title flex spaceBetween flexColumn">{{''+item.$orig.name+''}}<text>{{item.$orig.des}}</text></view><view class="content flex spaceBetween flexColumn">{{''+(item.$orig.discount_type==='a'?'满'+item.g0+'减'+item.g1:item.$orig.data+'折')+''}}<text>{{"有效期至："+item.$orig.end_time}}</text></view></view><block wx:if="{{item.$orig.types}}"><view class="type">{{'可用类型：'+item.$orig.types+''}}</view></block><view class="get flex alignCenter spaceBetween"><view class="points">{{'兑换积分：'+item.$orig.integral+''}}</view><view data-event-opts="{{[['tap',[['exchange',[1,'$0'],[[['list','',index]]]]]]]}}" class="charge flex alignCenter justifyCenter" bindtap="__e">兑换</view></view></view></block></view></block><block wx:if="{{current===2}}"><view class="list"><block wx:for="{{list}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view class="item flex alignCenter"><image src="{{item.cover_image}}"></image><view class="right"><view class="title">{{item.name}}</view><view class="options flex alignCenter spaceBetween">{{'兑换积分：'+item.integral+''}}<view data-event-opts="{{[['tap',[['exchange',[2,'$0'],[[['list','id',item.id]]]]]]]}}" class="charge" bindtap="__e">兑换</view></view></view></view></block></view></block><u-popup vue-id="3927eec8-1" show="{{discountShow}}" mode="bottom" round="5.33vw" data-event-opts="{{[['^close',[['e0']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="discountContent"><view class="title flex alignCenter spaceBetween">兑换<u-icon vue-id="{{('3927eec8-2')+','+('3927eec8-1')}}" name="close" color="#000000" size="25" data-event-opts="{{[['^click',[['e1']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view><view style="padding:0 2.27vw;"><view class="item flex alignCenter"><image src="{{changeItem.cover_image}}" alt mode="aspectFill"></image><view class="title flex spaceBetween flexColumn">{{''+changeItem.name+''}}<text>{{changeItem.des}}</text></view><view class="content flex spaceBetween flexColumn">{{''+(changeItem.discount_type==='a'?'满'+$root.g2+'减'+$root.g3:changeItem.data+'折')+''}}<text>{{"有效期至："+changeItem.end_time}}</text></view></view><block wx:if="{{changeItem.types}}"><view class="type">{{'可用类型：'+changeItem.types+''}}</view></block><view class="points">{{"兑换积分："+changeItem.integral}}</view><view data-event-opts="{{[['tap',[['confirm']]]]}}" class="confirm" bindtap="__e">确定兑换</view></view></view></u-popup><u-popup vue-id="3927eec8-3" show="{{shopShow}}" mode="bottom" round="5.33vw" data-event-opts="{{[['^close',[['e2']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="shopContent"><view class="title flex alignCenter spaceBetween">兑换<u-icon vue-id="{{('3927eec8-4')+','+('3927eec8-3')}}" name="close" color="#000000" size="25" data-event-opts="{{[['^click',[['e3']]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view><view style="padding:0 2.27vw;"><view class="item flex alignCenter"><image src="{{changeItem.cover_image}}"></image><view class="right"><view class="title">{{changeItem.name}}</view><view class="options flex alignCenter spaceBetween">{{'兑换积分：'+changeItem.integral+''}}<view class="changeNum"><view data-event-opts="{{[['tap',[['changeNumber',['min']]]]]}}" class="op_item" bindtap="__e"><u-icon vue-id="{{('3927eec8-5')+','+('3927eec8-3')}}" name="minus" size="4vw" color="rgb(245, 232, 174)" bind:__l="__l"></u-icon></view><view class="num">{{changeNum}}</view><view data-event-opts="{{[['tap',[['changeNumber',['add']]]]]}}" class="op_item" bindtap="__e"><u-icon vue-id="{{('3927eec8-6')+','+('3927eec8-3')}}" name="plus" size="4vw" color="rgb(245, 232, 174)" bind:__l="__l"></u-icon></view></view></view></view></view><view class="points">{{"兑换积分："+$root.m0}}</view><view data-event-opts="{{[['tap',[['confirmBtn']]]]}}" class="confirm" bindtap="__e">确定兑换</view></view></view></u-popup></view>