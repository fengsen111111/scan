(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/CanvasImage"],{4799:function(t,e,n){},"8e01":function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("7eb4")),c=a(n("ee10")),o=a(n("17d1")),r={name:"CanvasImage",props:{tabFlag:{type:Boolean,default:!0},show:{type:Boolean,default:!1},qrCode:{type:String,default:""}},data:function(){return{ctx:null}},created:function(){var e=this;return(0,c.default)(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.show&&e.tabFlag&&t.hideTabBar();case 1:case"end":return n.stop()}}),n)})))()},methods:{setImageCenter:function(e,n){return new Promise((function(a){t.getImageInfo({src:e,success:function(t){a({x:(n.width-180)/2,y:n.height-180-40,tempUrl:t.path,width:180,height:180})}})}))},save:function(){var e=this;t.canvasToTempFilePath({canvasId:"canvasId",success:function(n){var a=n.tempFilePath;t.saveImageToPhotosAlbum({filePath:a,success:function(){t.showToast({title:"图片保存成功"}),e.$emit("close")},fail:function(){t.showToast({title:"图片保存失败",icon:"none"})}})},fail:function(e){t.showToast({title:e.errMsg,icon:"none"})}},this)},roundRect:function(t,e,n,a,i){this.ctx.beginPath(),this.ctx.moveTo(t+i,e),this.ctx.lineTo(t+n-i,e),this.ctx.quadraticCurveTo(t+n,e,t+n,e+i),this.ctx.lineTo(t+n,e+a-i),this.ctx.quadraticCurveTo(t+n,e+a,t+n-i,e+a),this.ctx.lineTo(t+i,e+a),this.ctx.quadraticCurveTo(t,e+a,t,e+a-i),this.ctx.lineTo(t,e+i),this.ctx.quadraticCurveTo(t,e,t+i,e),this.ctx.closePath(),this.ctx.stroke()}},watch:{show:function(e){var n=this;e&&this.tabFlag?t.hideTabBar():this.tabFlag&&t.showTabBar(),e&&this.qrCode&&!this.ctx&&(t.showLoading({title:"请稍后"}),t.createSelectorQuery().in(this).select("#content").boundingClientRect().exec(function(){var e=(0,c.default)(i.default.mark((function e(a){var c,r,u,s,l,f,d;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=a[0],e.next=3,n.setImageCenter(n.qrCode,c);case 3:r=e.sent,u=r.tempUrl,s=r.x,l=r.y,f=r.width,d=r.height,n.ctx=t.createCanvasContext("canvasId",n),n.ctx.fillRect(0,0,c.width,c.height),n.ctx.drawImage(o.default,0,0,c.width,c.height),20,n.roundRect(s,l,f,d,20),n.ctx.setFillStyle("#ffffff"),n.ctx.fill(),n.ctx.drawImage(u,s+10,l+10,f-20,d-20),n.ctx.draw(!0,(function(e){t.hideLoading()}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}};e.default=r}).call(this,n("df3c")["default"])},"8f89":function(t,e,n){"use strict";var a=n("4799"),i=n.n(a);i.a},afcc:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a}));var a={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"8297"))}},i=function(){var t=this.$createElement;this._self._c},c=[]},c917:function(t,e,n){"use strict";n.r(e);var a=n("8e01"),i=n.n(a);for(var c in a)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(c);e["default"]=i.a},f7cb:function(t,e,n){"use strict";n.r(e);var a=n("afcc"),i=n("c917");for(var c in i)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(c);n("8f89");var o=n("828b"),r=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=r.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/CanvasImage-create-component',
    {
        'components/CanvasImage-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("f7cb"))
        })
    },
    [['components/CanvasImage-create-component']]
]);
